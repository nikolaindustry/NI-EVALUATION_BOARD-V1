// Quick Setup Guide for Testing Modbus RTU Between Two Boards
// =============================================================
//
// This guide helps you test Modbus RTU communication between two
// NI Evaluation Board V1 devices.
//
// ============================================
// HARDWARE SETUP
// ============================================
//
// Board Connections:
// ------------------
//   Board 1 (Master)          Board 2 (Slave)
//   ================          ================
//   RS485 A    <----------->  RS485 A
//   RS485 B    <----------->  RS485 B
//   GND        <----------->  GND
//
// Important:
// 1. Connect A to A and B to B (DO NOT cross them)
// 2. If no communication, try swapping A and B
// 3. Both boards must share common GND
// 4. Add 120Î© termination resistor between A-B on EACH board
//
// Termination Resistor:
// --------------------
//   [Board 1 A] ----+---- [Board 2 A]
//                   |
//                 120Î©
//                   |
//   [Board 1 B] ----+---- [Board 2 B]
//
// Power:
// ------
// - Both boards need separate power supplies
// - Or use USB power for both boards
//
// ============================================
// SOFTWARE SETUP
// ============================================
//
// Step 1: Upload Master Code
// ---------------------------
// 1. Open Arduino IDE
// 2. Select Board 1 (Master)
// 3. Open: File > Examples > NI-EVALUATION_BOARD-V1 > ModbusRTUMasterTest
// 4. Upload to Board 1
// 5. Open Serial Monitor at 115200 baud
//
// Step 2: Upload Slave Code
// --------------------------
// 1. Keep Board 1 connected (don't disconnect)
// 2. Connect Board 2 (Slave)
// 3. Open: File > Examples > NI-EVALUATION_BOARD-V1 > ModbusRTUSlaveTest
// 4. Upload to Board 2
// 5. Open Serial Monitor at 115200 baud (new window)
//
// Step 3: Verify Communication
// -----------------------------
// 1. Both Serial Monitors should be open side-by-side
// 2. Master should show test cycles every 2 seconds
// 3. Slave should show incoming requests
// 4. Check for "âœ“ SUCCESS" on master
// 5. Check for "ðŸ“¥ [#] REQUEST" on slave
//
// ============================================
// WHAT TO EXPECT
// ============================================
//
// Master Serial Monitor:
// ----------------------
// Test Cycle #1
// ========================================
// Test 1: Read Holding Registers
// -------------------------------
// âœ“ SUCCESS
//   Register 0 (DAC0 mV): 0
//   Register 1 (DAC1 mV): 0
//   ...
//
// Test 2: Write Single Register (Control Slave DAC)
// --------------------------------------------------
// âœ“ SUCCESS - Slave DAC0 should now output 0.0 V
//   ...
//
// Slave Serial Monitor:
// ---------------------
// ðŸ“¥ [1] READ HOLDING REG @ 0x00
//   âœ“ DAC0 voltage (mV): 0
// ðŸ“¥ [2] READ HOLDING REG @ 0x01
//   âœ“ DAC1 voltage (mV): 0
//   ...
//
// Physical Indicators:
// --------------------
// - Relay clicks every 2 seconds on slave board
// - DAC voltage changes (measure with voltmeter)
// - PWM outputs vary (visible if LED connected)
//
// ============================================
// TROUBLESHOOTING
// ============================================
//
// Problem 1: "No requests received" on slave
// -------------------------------------------
// Solution:
// âœ“ Check RS485 wiring (A-A, B-B, GND-GND)
// âœ“ Try swapping A and B connections
// âœ“ Verify both boards are powered
// âœ“ Check baud rate is 9600 on both
// âœ“ Ensure master code is running
//
// Problem 2: "âœ— FAILED" on all master tests
// ------------------------------------------
// Solution:
// âœ“ Verify slave address matches (default: 1)
// âœ“ Check if slave board is running
// âœ“ Add 120Î© termination resistors
// âœ“ Reduce cable length if very long
// âœ“ Check RS485 A/B polarity
//
// Problem 3: Some tests pass, others fail
// ----------------------------------------
// Solution:
// âœ“ Check exception code (0x01-0x04)
// âœ“ Verify register addresses are correct
// âœ“ Check slave callbacks are registered
// âœ“ Monitor slave Serial for error messages
//
// Problem 4: Communication works but unstable
// --------------------------------------------
// Solution:
// âœ“ Add/check 120Î© termination on both ends
// âœ“ Use twisted pair cable for RS485
// âœ“ Keep cables away from power lines
// âœ“ Ensure solid GND connection
// âœ“ Try lower baud rate (e.g., 4800)
//
// ============================================
// TESTING CHECKLIST
// ============================================
//
// Hardware:
// â–¡ RS485 A-A connected
// â–¡ RS485 B-B connected
// â–¡ GND-GND connected
// â–¡ 120Î© resistor on Board 1
// â–¡ 120Î© resistor on Board 2
// â–¡ Both boards powered
//
// Software:
// â–¡ Master code uploaded to Board 1
// â–¡ Slave code uploaded to Board 2
// â–¡ Serial Monitor open for Board 1 (115200 baud)
// â–¡ Serial Monitor open for Board 2 (115200 baud)
//
// Communication:
// â–¡ Master shows "âœ“ SUCCESS" messages
// â–¡ Slave shows "ðŸ“¥ [#] REQUEST" messages
// â–¡ Relay clicks on slave board
// â–¡ DAC voltage measured and changing
// â–¡ No timeout or exception errors
//
// ============================================
// ADVANCED TESTING
// ============================================
//
// Test with Different Baud Rates:
// --------------------------------
// Change both sketches:
//   const uint32_t MODBUS_BAUD = 19200;  // or 38400, 57600
//
// Test with Multiple Slaves:
// ---------------------------
// 1. Set different slave addresses:
//      Slave 1: const uint8_t SLAVE_ADDRESS = 1;
//      Slave 2: const uint8_t SLAVE_ADDRESS = 2;
// 2. Modify master to communicate with both
// 3. All slaves on same RS485 bus
//
// Test with PLC Software:
// -----------------------
// 1. Keep slave board running
// 2. Use QModMaster or ModbusPoll
// 3. Configure: 9600 baud, 8N1, RTU mode
// 4. Test reading/writing registers
//
// ============================================
// MODBUS REGISTER MAP (SLAVE)
// ============================================
//
// Coils (Read/Write):
// -------------------
// 0x00 - Relay 1 (ON/OFF)
// 0x01 - Relay 2 (ON/OFF)
// 0x02 - Status LED (ON/OFF)
//
// Discrete Inputs (Read Only):
// -----------------------------
// 0x00-0x07 - Digital Inputs 1-8
//
// Holding Registers (Read/Write):
// --------------------------------
// 0x00 - DAC Channel 0 (mV, 0-10000)
// 0x01 - DAC Channel 1 (mV, 0-10000)
// 0x02 - PWM Channel 1 (duty, 0-255)
// 0x03 - PWM Channel 2 (duty, 0-255)
// 0x0A - Relay control (bit0=R1, bit1=R2)
//
// Input Registers (Read Only):
// -----------------------------
// 0x00-0x07 - Digital Input states (0/1)
// 0x08 - Pulse Counter 1 (low word)
// 0x09 - Pulse Counter 1 (high word)
// 0x0A - Pulse Counter 2 (low word)
// 0x0B - Pulse Counter 2 (high word)
//
// ============================================
// SUPPORT
// ============================================
//
// If you still have issues:
// 1. Check RS485 circuit schematic
// 2. Verify 555 IC is working (automatic direction control)
// 3. Test with shorter cables first
// 4. Use oscilloscope to check RS485 signals
// 5. Contact support@nikolaindustry.com
//
// ============================================
